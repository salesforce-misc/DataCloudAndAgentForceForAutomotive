LWR.define("@salesforce/label/MyCommunities.errorInFileDownload/v/0_15_9",["exports"],function(c){"use strict";var l="MyCommunities.errorInFileDownload";c.default=l,Object.defineProperty(c,"__esModule",{value:!0})}),LWR.define("@salesforce/label/MyCommunities.errorInFileDownload",["exports","@salesforce/label/MyCommunities.errorInFileDownload/v/0_15_9"],function(c,l){c.default=l&&typeof l=="object"&&"default"in l?l.default:l,Object.keys(l).forEach(function(r){r==="default"||c.hasOwnProperty(r)||Object.defineProperty(c,r,{enumerable:!0,get:function(){return l[r]}})})}),LWR.define("mobileruntime/hybridAppManager/v/1",["exports","lwr/loaderLegacy/v/0_15_9","logger/v/1","webruntime/routingService/v/1","@salesforce/site/Id/v/1","webruntime/transport/v/1","lwc/v/8_10_3","@salesforce/community/basePath/v/1","@app/basePath/v/1","@app/loginPath/v/1","@app/uiBasePath/v/1","@salesforce/label/MyCommunities.errorInFileDownload/v/0_15_9","webruntime/overrides/v/1"],function(c,l,r,E,H,q,u,G,J,X,Y,z,b){"use strict";function w(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var Q=w(H),A=w(G),D=w(J),L=w(X),Z=w(Y),K=w(z);function ee(){window.native={sendAILTNData:function(e){if(!e?.logLines)return new Promise(function(t,n){n("Received null or invalid payload")})},refreshNotifications:function(){document.dispatchEvent(new CustomEvent("refreshNotifications",{detail:{},bubbles:!0,cancelable:!0,composed:!1}))},navigateTo:function(e){return new Promise(function(t,n){e||n("Received invalid pageReference payload");try{const o=E.generateUrl(e);o?(window.open(new URL(o,window.location.href)),t("Navigated to the correct path")):n("Received invalid pageReference payload")}catch(o){n(`Error generating URL: ${o.message}`)}})}}}const te=u.parseFragment`<header class="slds-modal__header${0}"${2}><h2${"a1:id"} class="slds-modal__title slds-hyphenate${0}"${2}>${"t2"}</h2></header>`,ne=u.parseFragment`<div class="slds-modal__content slds-var-p-around_medium${0}"${"a0:id"}${2}><div class="slds-text-align_center slds-text-heading_small slds-var-p-around_medium${0}"${2}>${"t2"}</div></div>`,oe=u.parseFragment`<button class="slds-button slds-button_brand${0}"${2}><label${3}>${"t2"}</label></button>`,ae=u.parseFragment`<button class="slds-button slds-button_brand${0}"${2}><label${3}>${"t2"}</label></button>`,ie=u.parseFragment`<div class="slds-backdrop slds-backdrop_open${0}"${2}></div>`,re={key:0},se={"slds-modal":!0,"slds-fade-in-open":!0,"slds-modal_large":!0},le={classMap:{"slds-modal__container":!0},key:2},de={classMap:{"slds-modal__footer":!0},key:7};function v(e,t,n,o){const{gid:a,d:i,sp:s,st:d,b:p,h:f}=e,{_m0:x,_m1:g,_m2:h,_m3:m}=o;return[t.showModal?f("section",re,[f("section",{classMap:se,attrs:{role:"dialog",tabindex:"-1","aria-labelledby":a("modal-heading-01"),"aria-modal":"true","aria-describedby":a("modal-content-id-1")},key:1},[f("div",le,[d(te,4,[s(1,{attrs:{id:a("modal-heading-01")}},null),s(2,null,i(t.labels.ModalHeader))]),d(ne,6,[s(0,{attrs:{id:a("modal-content-id-1")}},null),s(2,null,i(t.modalBody))]),f("footer",de,[t.config.forceAppUpdate?null:d(oe,9,[s(0,{on:g||(o._m1={click:p(t.remindMeLater)})},null),s(2,null,i(t.labels.RemindMeLater))]),d(ae,11,[s(0,{on:m||(o._m3={click:p(t.openStore)})},null),s(2,null,i(t.labels.UpdateNow))])])])]),d(ie,13)]):null]}var ce=u.registerTemplate(v);v.stylesheets=[],v.stylesheetToken="lwc-2mvql2nutql",v.legacyStylesheetToken="mobileruntime-appUpdateModal_appUpdateModal",u.freezeTemplate(v);const ue={ModalHeader:"Update Your App",ForceUpdateModalBody:"You must update to the latest version of this app to continue using it.",ModalBody:"A new version of this app is available.Find and install the latest version of the app for your device.",RemindMeLater:"Remind Me Later",UpdateNow:"Update Now"};class O extends u.LightningElement{constructor(...t){super(...t);this.showModal=!0,this.config={}}get labels(){return ue}get modalBody(){return this.config.forceAppUpdate?this.labels.ForceUpdateModalBody:this.labels.ModalBody}openStore(){window.open(this.config?.minVersion?.url?.trim())}remindMeLater(){this.showModal=!1}}u.registerDecorators(O,{publicProps:{config:{config:0}},fields:["showModal"]});const fe=u.registerComponent(O,{tmpl:ce,sel:"mobileruntime-app-update-modal",apiVersion:63}),pe=`/services/data/v57.0/connect/sites/${Q.default}/cms/delivery/contents?contentTypeFQN=sfdc_cms__mobilePublisherConfig&includeContentBody=true`;function R(e,t){if(!y()){r.log("Native JS API is not available");return}const{invokeNative:n}=window.mycommunities.nativejsapi;return n(e,t)}function he(e=""){return new RegExp("^([a-z]+://)","i").test(e)}function me(e=""){if(!he(e))return!1;const t=new URL(e),n=window.location.host;return t.host!==n}async function ge(){if(!y()){r.log("Native JS API is not available");return}try{const e=await q.fetch(pe,{method:"GET"});if(e.status===200){const t=await e.json(),n=window.location.origin,{nativeTabMenu:o={},mobilePublisherAppUpdateConfig:a={}}=t?.contents?.[0]?.contentBody||{};if(o?.menuItems?.forEach((i,s)=>{const{payload:d,name:p,...f}=i;o.menuItems[s]={...f,name:p||" ",id:(s+1)*10,position:s+1,targetUrl:Me(n,i),iconDetails:{...f.iconDetails,mimeType:"image/png",url:`data:image/png;base64,${d}`}}}),a){const{forceAppUpdate:i=!1,enableAppUpdate:s=!1,minVersion:d={}}=a,p=Re()?"ios":Ue()?"android":"",f={forceAppUpdate:i,enableAppUpdate:s,minVersion:d[p]};F("forceAppUpdate")?o.appUpdateConfig={enableAppUpdate:s,gracePeriod:i?0:15}:Ae(f)}P(o)}else r.log("Failed to fetch bottom tab bar. Status is: ",e.status),P(!0)}catch(e){r.log("Failed to fetch bottom tab bar",e),P(!0)}r.log("Initial load done! Splash Screen hidden")}function we(e,t){const n=new URL(e||"",window.location.origin);e=n.href;const o="/servlet/networks/switch",a=n.pathname,i=a.indexOf("/s/"),s=i===-1?a:a.substring(0,i+2);return[o,encodeURIComponent(o)].some(d=>e.includes(d))||!s.startsWith(t)}function T(e){if(!e)return null;switch(e.length){case 15:return _e(e);case 18:return e;default:return null}}function ve(){const{cordova:e}=window;return typeof e!="undefined"&&e&&e.require("cordova/channel")&&e.require("cordova/channel").onDeviceReady&&e.require("cordova/channel").onDeviceReady.state===2}function U(){return ve()?window.cordova.require("com.salesforce.plugin.oauth"):null}function be(e){if(!e)return!1;const t="/secur/logout.jsp";return e.includes(t)||e.includes(encodeURIComponent(t))}function ye(e){const t=U();t&&t.logout(e)}function C(){r.log("hybrid_app_manager_utils:handle_page_loaded"),ee(),y()&&(typeof window.mycommunities.nativejsapi.webAppPageLoadDone=="function"?(r.log("hybrid_app_manager_utils:handle_page_loaded: webAppPageLoadDone function called"),window.mycommunities.nativejsapi.webAppPageLoadDone()):r.log("hybrid_app_manager_utils:handle_page_loaded:webAppPageLoadDone function is not available"))}function P(e){const{webAppBootstrapDone:t}=window.mycommunities.nativejsapi;r.log("Triggering webAppBootstrapDone"),t(e)}function F(e){return y()?window.mycommunities.nativejsapi.clientFeatures?.[e]?.enabled:!1}function Ae(e){const t=Pe();if(e.enableAppUpdate&&t){const n=e.minVersion.version;if(Le(t,n)){const a=u.createElement("app-update-modal",{is:fe});a.config=e,document.body.appendChild(a)}}}function Le(e,t){let n=e.split("."),o=t.split("."),a=0;for(;n.length<o.length;)n.push("0");for(;o.length<n.length;)o.push("0");n=n.map(Number),o=o.map(Number);for(let i=0;i<n.length;++i)if(n[i]!==o[i])if(n[i]>o[i]){a=1;break}else{a=-1;break}return a===-1}function Re(){const e=window?.navigator?.userAgent||"";return e.toLowerCase().includes("iphone")||e.toLowerCase().includes("ipad")}function Ue(){return(window?.navigator?.userAgent||"").toLowerCase().includes("android")}function Pe(){const t=(window?.navigator?.userAgent||"").split("CommunityHybridContainer/")[1];return t&&(t.match(/(\d{1,3}\.)?(\d{1,3}\.)?(\d{1,3})/)||[])[0]}function _e(e){let t="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456";for(let o=0;o<3;++o){let a=0;for(let i=0;i<5;i++){const s=e.charAt(o*5+i);s>="A"&&s<="Z"&&(a+=1<<i)}t+=n.charAt(a)}return e+t}function y(){return window?.mycommunities?.nativejsapi}function Me(e,t){let n=t.targetUrl;return A.default&&(n=A.default+n),new URL(n,e).href}const Ie="/secur/frontdoor.jsp";function Ee({routeUrl:e}){const t=U();t?t.authenticate(function(n){n&&n.accessToken&&(document.cookie=`sid=${n.accessToken}; path=/; secure=true`,e!=null&&window.open(e))},function(){r.logError("Error in handler Session Timeout. Cordova OAuth Plugin authentication failed.")}):r.logError("Error in handler Session Timeout. OAuth Plugin is not available.")}async function De(){let e=!1;const t=await l.load("@app/user/v/1");try{await l.load(`@app/user?c=${crypto.randomUUID()}`,"mobileruntime/hybridAppManager/v/1")}catch(n){e=!t.isGuest}return e}function N(e){const t=new URL(L.default,window.location.href),n=new URL(e,window.location.href);return L.default&&t.pathname===n.pathname&&t.origin===n.origin}function _(e){const t=U();t?t.authenticate(function(n){window.location.href=`${n.loginUrl}${Ie}?sid=${n.accessToken}&retURL=${encodeURIComponent(e||Z.default)}&display=touch`},function(){throw new Error("Authentication via Cordova OAuth Plugin failed.")}):window.location.href=e||L.default}function Oe(e){if(typeof e=="object"){if(e.type==="standard__webPage"){const{attributes:{url:t=null}={}}=e;if(t&&N(t)){const n=new URL(t,window.location.href);return _(n.searchParams.get("startURL")),!1}}else if(e.type==="comm__namedPage"&&e.attributes&&e.attributes.name==="Login"||e.type==="comm__loginPage"&&e.attributes?.actionName==="login")return _(e?.state?.startURL),!1}return!0}async function Te({next:{route:e,routeDefinition:t}={}}={}){if(t?.metadata?.isPublic!==!1)return!0;const{default:n}=await l.load("@app/user/v/1");if(n.isGuest){const o=await E.generateUrl(e);if(o){const a=new URL(o,window.location.href);return _(a.pathname+a.search+a.hash),!1}}return!0}function M(){r.log("Handle showing of Toast Message for Error case.")}const Ce=["/sfc/servlet.shepherd","/servlet/servlet.FileDownload","/servlet/fileField","version/renditionDownload","/cms/delivery/media"];function Fe(e){const t="/sfc/servlet.:type/:contentType/download/:recordId",n=new RegExp(t.replace(/:[^\s/]+/g,"([\\w-]+)")),o=F("isEnhancedDownloadEnabled"),a=e.match(n);if(a&&a.length===4)return o?{recordId:a[3],url:e}:{recordId:a[3]};const i="/servlet/servlet.:type?file=:recordId",s=new RegExp(i.replace(/:[^\s/?]+/g,"([\\w-]+)").replace(/\?/g,"[?]")),d=e.match(s);if(d&&d.length===3)return o?{recordId:d[2],url:e}:{recordId:d[2]};const p="/servlet/fileField";if(e.includes(p)){const g=new URLSearchParams(decodeURIComponent(e).split("?")[1]),h=g.get("entityId"),m=g.get("field");return o?{recordId:h,fieldId:m,url:e}:{recordId:h,fieldId:m}}const f="version/renditionDownload";if(e.includes(f)){const h=new URL(e).searchParams.get("versionId");return o?{recordId:T(h),url:e}:{recordId:T(h)}}const x="/cms/delivery/media";if(e.includes(x)){const g="/cms/delivery/media/([\\w]+)",h=new RegExp(g),m=e.match(h);if(m&&m.length===2){const B=m[1],$=new URL(e),V=$.searchParams.get("version"),W=$.searchParams.get("channelId");return o?{recordId:B,versionId:V,channelId:W,url:e}:{recordId:B,versionId:V,channelId:W}}}return null}function Ne(e){const t=R("downloadFile",e);if(t)return t.catch(n=>{r.log(`Error while downloading file of record id: ${e.recordId} message: ${n}`&&n.message),M()})}function ke(e){if(!e){r.log(`${K.default}. URL is ${e}`),M();return}const t=Fe(e);if(!t){r.log(`Parsing the file URL "${e}" yielded null`),M();return}return Ne(t)}function Se(e){return e=e||"",Ce.some(t=>e.indexOf(t)>-1)}const je=globalThis.open;function k(e){const t=new URL(e,window.location.href);if(e=t.href,t.protocol==="http:"){r.log("Blocked for http protocol with URL:",e);return}if(e.startsWith("javascript")){r.log("Blocked potential XSS attempt with URL:",e);return}if(e.indexOf("/")!==0&&e.indexOf("http://")!==0&&e.indexOf("https://")!==0)return je(e,"_self");if(be(e))ye(e);else if(me(t))R("navigateToExternalURL",{url:e});else if(N(e))I({type:"standard__webPage",attributes:{url:t.pathname+t.search+t.hash}},!1);else if(Se(e))ke(e);else if(we(e,D.default))R("navigateToExternalURL",{url:e});else{const n=t?.pathname||"",o=t?.search||"",a=n==="/"||n===D.default;n.startsWith(A.default)?I({type:"standard__webPage",attributes:{url:n+o}},a):I({type:"standard__webPage",attributes:{url:e}},a)}}function I(e,t){return document.dispatchEvent(new CustomEvent("notify-client-module",{cancelable:!0,composed:!0,detail:{action:"navigate",data:{routeObj:e,replaceState:t}}}))}function xe(){Be()}function Be(){document.addEventListener("click",Ve),document.addEventListener("notify-mobile-module",We)}function $e({pathMatch:e,route:t,routeDefinition:n}){const{id:o}=t||{},{type:a}=t?.pageReference||{},{isRoot:i}=n?.metadata||{};document.dispatchEvent(new CustomEvent("routeChangeSuccess",{bubbles:!0,composed:!0,detail:{routeType:a,routeId:o,routeUrl:e,backNavigation:{canGoBack:!i}}}))}function Ve(e){const t=e.composedPath().find(n=>n.tagName==="A");if(t)return e.preventDefault(),e.stopPropagation(),k(t.href)}function We({detail:e}){const{action:t,data:n}=e||{action:"",data:null};switch(t){case"navigationcompleted":$e(n?.routeResult||{});break;default:r.log(`No such ${t} exists in notify-mobile-module event. Please re-check!!`);break}}function He(){window.open=e=>k(e)}async function S(){return await ge(),/interactive|complete/.test(document.readyState)?C():document.addEventListener("DOMContentLoaded",C,!1),He(),xe()}function j(){return Ee({routeUrl:window.location.pathname}),!1}b.PreNavigateOverrides.add(e=>Te(e)),b.NavigationOverrides.add(e=>Oe(e)),b.PageNavigationFailureOverrides.add(async({error:e,isPublic:t})=>{const n=await De();return e?.constructor?.name==="LoaderError"&&!t&&n?j():!0}),b.SessionTimeoutOverrides.add(()=>j());function qe(e){Object.entries(e).forEach(([t,n])=>{LWR.define(t,[],function(){return n})})}qe({"mobileruntime/hybridAppManager":S}),c.hybridAppManager=S,Object.defineProperty(c,"__esModule",{value:!0})}),LWR.define("mobileruntime/hybridAppManager",["exports","mobileruntime/hybridAppManager/v/1"],function(c,l){c.default=l&&typeof l=="object"&&"default"in l?l.default:l,Object.keys(l).forEach(function(r){r==="default"||c.hasOwnProperty(r)||Object.defineProperty(c,r,{enumerable:!0,get:function(){return l[r]}})})});
